<app-header></app-header>
<div class="vende-container">
  <div class="form-header">
    <h1>Vende tu artículo</h1>
    <p>Completa el formulario para registrar tu artículo y mostrarlo al público.</p>
  </div>

  <!-- Formulario de registro de artículo -->
  <form [formGroup]="form" (ngSubmit)="submitForm()" class="vende-form">
    <div class="form-group">
      <label for="articleName">Nombre del artículo</label>
      <input
        type="text"
        id="articleName"
        class="form-control"
        formControlName="articleName"
        placeholder="Introduce el nombre del artículo"
      />
    </div>

    <div class="form-group">
      <label for="articleDescription">Descripción</label>
      <textarea
        id="articleDescription"
        class="form-control"
        formControlName="articleDescription"
        placeholder="Introduce las características separadas por comas"
      ></textarea>
    </div>

    <!-- Características procesadas -->
    <div *ngIf="descriptionRows.length > 0" class="description-list">
      <h3>Características procesadas:</h3>
      <ul>
        <li *ngFor="let row of descriptionRows">{{ row }}</li>
      </ul>
    </div>

    <div class="form-group">
      <label for="selectedCategoryId">Categoría</label>
      <select
        id="selectedCategoryId"
        class="form-control"
        formControlName="selectedCategoryId"
      >
        <option *ngFor="let category of categories" [value]="category.id_categoria">
          {{ category.nombre_categoria }}
        </option>
      </select>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="articlePrice">Precio (MXN)</label>
        <input
          type="number"
          id="articlePrice"
          class="form-control"
          formControlName="articlePrice"
          placeholder="Precio en MXN"
        />
      </div>

      <div class="form-group">
        <label for="articleQuantity">Cantidad</label>
        <input
          type="number"
          id="articleQuantity"
          class="form-control"
          formControlName="articleQuantity"
          placeholder="Cantidad disponible"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="transactionType">Tipo de transacción</label>
      <select id="transactionType" class="form-control" formControlName="transactionType">
        <option value="VENTA">Venta</option>
        <option value="INTERCAMBIO">Intercambio</option>
        <option value="PRESTAMO">Renta</option>
      </select>
    </div>

    <div class="form-group">
      <label for="articleState">Estado del artículo</label>
      <select id="articleState" class="form-control" formControlName="articleState">
        <option value="DISPONIBLE">Disponible</option>
        <option value="NO_DISPONIBLE">No Disponible</option>
        <option value="PENDING">Pndiente</option>
        <option value="COMPLETED">Completado </option>
      </select>
    </div>

    <div class="form-group">
      <label for="userName">Nombre del usuario</label>
      <input
        type="text"
        id="userName"
        class="form-control"
        formControlName="userName"
        placeholder="Introduce tu nombre"
      />
    </div>

    <div class="form-group">
      <label for="userEmail">Correo electrónico</label>
      <input
        type="email"
        id="userEmail"
        class="form-control"
        formControlName="userEmail"
        placeholder="Introduce tu correo"
      />
    </div>

    <button type="submit" class="btn btn-primary submit-button" [disabled]="isLoading">
      {{ isLoading ? 'Cargando...' : 'Registrar Artículo' }}
    </button>
  </form>

  <!-- Carga de imágenes -->
  <div class="image-upload">
    <h2>Sube una imagen</h2>
    <div class="form-group">
      <input
        type="file"
        class="form-control-file"
        (change)="onImageSelected($event)"
        accept=".jpg,.jpeg,.png"
      />
    </div>
    <div class="image-preview" *ngIf="imageUrl">
      <h3>Vista previa:</h3>
      <img [src]="imageUrl" alt="Vista previa de la imagen" />
    </div>
  </div>
  
</div>
